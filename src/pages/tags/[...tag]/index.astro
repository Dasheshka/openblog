---
import ListPosts from "@/components/ListPosts.astro";
import TitlePage from "@/components/TitlePage.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getPostByTag, getTags } from "@/utils";

export async function getStaticPaths() {
  const tags = await getTags();

  return tags.map((tag) => ({
    params: { tag: tag.value },
    props: { tag: tag }
  }));
}

const { tag } = Astro.props;

const posts = await getPostByTag(tag.value);
---

<BaseLayout title={tag.label}>
  <TitlePage title={tag.label} />
  <ListPosts posts={posts} />
</BaseLayout>
