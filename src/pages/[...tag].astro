---
import Posts from "@/components/Posts.astro";
import Common from "@/layouts/Common.astro";
import { getPostByTag, getTags } from "@/lib/content";

export async function getStaticPaths() {
  const tags = await getTags();

  return tags.map((tag) => ({
    params: { tag: tag.value },
    props: { tag: tag },
  }));
}

const { tag } = Astro.props;

const posts = await getPostByTag(tag);
---

<Common title={tag.label}>
  <h1 class="title">
    {tag.label}
  </h1>
  <Posts posts={posts} />
</Common>
